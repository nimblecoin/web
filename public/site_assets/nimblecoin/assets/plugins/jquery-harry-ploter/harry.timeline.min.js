// harry plotter timeline serie generator - 0.1
// ~L~ nikomomo@gmail.com 2012-2013
// https://github.com/nikopol/Harry-Plotter
harry.timeline=function(){var f=function(a,b,d,f){var e=null,k=null,g=[],l=[],m=[],q={},h,j,c,p;a instanceof Array||(a=[a]);b*=1E3;for(h in a){var n={};for(p in a[h]){c=d(p);c=Math.floor(c.getTime()/b)*b;if(null===e||c<e)e=c;if(null===k||c>k)k=c;var r=parseFloat(a[h][p]);n[c]=n[c]?n[c]+r:r}l.push(n)}for(j in l){a={values:[],labels:[]};if(0==j){c=e;for(j=0;c<=k;c+=b,j++)m.push(f(new Date(c))),q[c]=j}for(c=e;c<=k;c+=b)a.values.push(null);a.labels=m;g.push(a)}for(h in l)for(c in l[h])j=q[c],g[h].values[j]=l[h][c];return g},e=function(a){var b=new Date(a);if(!isNaN(b))return b;if(/^(\d{4})\D(\d{2})\D(\d{2})(?:\D(\d{2}))?(?:\D(\d{2}))?(?:\D(\d{2}))?/.test(a))return new Date(RegExp.$1,RegExp.$2-1,RegExp.$3,RegExp.$4||0,RegExp.$5||0,RegExp.$6||0);console.log("unable to parse date ",a," please setup a parser");return null},g=function(a){return a.toISOString().substr(5,5)},s=function(a){return a.toTimeString().substr(0,5)},m=function(a){return a.toTimeString().substr(0,8)};return{year:function(a,b,d){return f(a,
1314E3,b||e,d||g)},month:function(a,b,d){return f(a,111600,b||e,d||g)},week:function(a,b,d){return f(a,604800,b||e,d||g)},day:function(a,b,d){return f(a,86400,b||e,d||g)},hour:function(a,b,d){return f(a,3600,b||e,d||s)},minute:function(a,b,d){return f(a,60,b||e,d||m)},second:function(a,b,d){return f(a,1,b||e,d||m)}}}();